graph TD
    A[MainWindow] --> B[TaskList]
    A --> C[CommandForm]
    B --> D[TaskComponent]
    C --> E[CommandComponent]
    E --> F[ArgumentComponent]


graph TB
    subgraph "Point d'Entrée"
        Main[main.py]
        YamlLoader[YamlTaskLoader]
    end
    
    subgraph "Fenêtre Principale"
        MainWindow[MainWindow]
    end
    
    subgraph "Composants Conteneurs"
        TaskList[TaskList]
        CommandForm[CommandForm]
        ConsoleOutput[ConsoleOutput]
    end
    
    subgraph "Composants Enfants"
        TaskComponent[TaskComponent]
        CommandComponent[CommandComponent]
        ArgumentComponent[ArgumentComponent]
    end
    
    subgraph "Modèles de Données"
        Task[Task]
        Command[Command]
        Argument[Argument]
    end
    
    subgraph "Injection de Dépendances"
        TaskFactory[task_widget_factory]
        CommandFactory[command_widget_factory]
    end

    %% Définition des styles
    classDef container fill:#4a9eff,stroke:#333,stroke-width:3px,color:#fff
    classDef factory fill:#90ee90,stroke:#333,stroke-width:2px
    
    %% Application des styles
    class TaskList,CommandForm container
    class TaskFactory,CommandFactory factory
    
    %% Connexions
    Main -->|1. Charge| YamlLoader
    YamlLoader -->|2. Retourne 'List of Tasks'| Main
    Main -->|3. Crée| MainWindow
    Main -->|4. set_tasks| MainWindow
    
    MainWindow -->|5. Contient| TaskList
    MainWindow -->|6. Contient| CommandForm
    MainWindow -->|7. Contient| ConsoleOutput
    
    TaskList -.->|Injection optionnelle| TaskFactory
    TaskFactory -.->|Crée| TaskComponent
    TaskList -->|Par défaut crée| TaskComponent
    
    CommandForm -.->|Injection optionnelle| CommandFactory
    CommandFactory -.->|Crée| CommandComponent
    CommandForm -->|Par défaut crée| CommandComponent
    
    CommandComponent -->|Contient N| ArgumentComponent
    
    %% Légende
    legend[Legende]
    legend --> container[Conteneur]
    legend --> factory[Factory]
