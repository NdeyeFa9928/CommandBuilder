<h2>ğŸ”— Arguments partagÃ©s entre commandes</h2>

<div style="background-color: #e8f5e9; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #4caf50;">
    <h3 style="margin-top: 0;">ğŸ’¡ Pourquoi utiliser des arguments partagÃ©s ?</h3>
    <p style="font-size: 14px; line-height: 1.6;">
    Quand plusieurs commandes utilisent <b>la mÃªme valeur</b> (ex: rÃ©pertoire de base, fichier de sortie),<br>
    â†’ <b>DÃ©finir une seule fois</b> au niveau de la tÃ¢che<br>
    â†’ L'utilisateur saisit <b>une seule fois</b> âœ…<br>
    â†’ La valeur est <b>automatiquement injectÃ©e</b> dans les commandes concernÃ©es<br>
    â†’ Les valeurs par dÃ©faut de la tÃ¢che <b>remplacent</b> celles des commandes
    </p>
</div>

<h3>ğŸ“ Syntaxe : Section <code>arguments</code> avec <code>values</code></h3>
<div style="background-color: #fff3e0; padding: 12px; border-radius: 6px; margin: 10px 0; border-left: 4px solid #ff9800;">
    <b>âš ï¸ IMPORTANT :</b> La section s'appelle <code>arguments</code> (pas <code>shared_arguments</code>)<br>
    Chaque argument contient une liste <code>values</code> qui indique oÃ¹ l'injecter.
</div>

<h3>ğŸ¯ Exemple rÃ©el : Traitement de campagne</h3>
<p style="color: #666; font-size: 13px;">Cas d'usage : Import TDMS vers une base, puis export de cette base vers TXT/Images</p>
<pre style="background-color: #f5f5f5; padding: 12px; border-radius: 4px; font-size: 12px; border-left: 3px solid #9C27B0;">
<span style="color: #c62828; font-weight: bold;">name:</span> "Traitement campagne"
<span style="color: #c62828; font-weight: bold;">description:</span> "Import TDMS du dossier + export campagne (TXT + IMAGES)"

<span style="color: #1565c0; font-weight: bold;">arguments:</span>  <span style="color: #666;"># â† Arguments partagÃ©s de la tÃ¢che</span>
  - <span style="color: #c62828;">code:</span> "base"  <span style="color: #666;"># â† Code de l'argument partagÃ©</span>
    <span style="color: #c62828;">name:</span> "RÃ©pertoire de base"
    <span style="color: #c62828;">description:</span> "RÃ©pertoire contenant la base de donnÃ©es"
    <span style="color: #c62828;">type:</span> "directory"
    <span style="color: #c62828;">required:</span> 1
    <span style="color: #1565c0;">default:</span> "L:\\PROJET\\BASE"
    <span style="color: #1565c0; font-weight: bold;">values:</span>  <span style="color: #666;"># â† Liste des injections</span>
      - <span style="color: #c62828;">command:</span> "tdmsdirimport_tc"  <span style="color: #666;"># â† Nom de la commande</span>
        <span style="color: #c62828;">argument:</span> "OUTPUT_DIR"       <span style="color: #666;"># â† Code de l'argument cible</span>
      - <span style="color: #c62828;">command:</span> "campaignexport"
        <span style="color: #c62828;">argument:</span> "DATABASE_FILE"    <span style="color: #666;"># â† InjectÃ© ici aussi</span>

<span style="color: #c62828; font-weight: bold;">commands:</span>
  - !include ../commands/tdmsdirimport_commands.yaml
  - !include ../commands/campaignexport_commands.yaml
</pre>

<div style="background-color: #e3f2fd; padding: 12px; border-radius: 6px; margin: 15px 0; border-left: 4px solid #2196F3;">
    <b>ğŸ” Comment Ã§a fonctionne :</b>
    <ol style="margin: 5px 0; padding-left: 20px; line-height: 1.8;">
        <li>L'utilisateur saisit <b>une seule fois</b> le rÃ©pertoire de base : <code>L:\PROJET\BASE</code></li>
        <li>Cette valeur est injectÃ©e dans <code>OUTPUT_DIR</code> de <code>tdmsdirimport_tc</code></li>
        <li>Cette mÃªme valeur est injectÃ©e dans <code>DATABASE_FILE</code> de <code>campaignexport</code></li>
        <li>RÃ©sultat : <b>cohÃ©rence garantie</b> entre les deux commandes âœ…</li>
    </ol>
</div>

<h3>ğŸ”„ Cas avec plusieurs arguments partagÃ©s</h3>
<pre style="background-color: #f5f5f5; padding: 12px; border-radius: 4px; font-size: 12px; border-left: 3px solid #9C27B0;">
<span style="color: #1565c0;">arguments:</span>
  - <span style="color: #c62828;">code:</span> "projet"  <span style="color: #666;"># â† Argument partagÃ© 1</span>
    <span style="color: #c62828;">name:</span> "Nom du projet"
    <span style="color: #c62828;">type:</span> "string"
    <span style="color: #c62828;">required:</span> 1
    <span style="color: #1565c0;">default:</span> "E3D_S29"
    <span style="color: #1565c0;">values:</span>
      - <span style="color: #c62828;">command:</span> "tdmsdirimport_tc"
        <span style="color: #c62828;">argument:</span> "PNAME"
      - <span style="color: #c62828;">command:</span> "campaignexport"
        <span style="color: #c62828;">argument:</span> "PROJECT_NAME"
  
  - <span style="color: #c62828;">code:</span> "base_dir"  <span style="color: #666;"># â† Argument partagÃ© 2</span>
    <span style="color: #c62828;">name:</span> "RÃ©pertoire de base"
    <span style="color: #c62828;">type:</span> "directory"
    <span style="color: #c62828;">required:</span> 1
    <span style="color: #1565c0;">values:</span>
      - <span style="color: #c62828;">command:</span> "tdmsdirimport_tc"
        <span style="color: #c62828;">argument:</span> "OUTPUT_DIR"
      - <span style="color: #c62828;">command:</span> "campaignexport"
        <span style="color: #c62828;">argument:</span> "DATABASE_FILE"
</pre>

<h3>ğŸ”€ Combinaison : Arguments partagÃ©s + Arguments locaux</h3>
<p style="color: #666; font-size: 13px;">Les commandes peuvent avoir leurs propres arguments EN PLUS des arguments partagÃ©s :</p>
<pre style="background-color: #f5f5f5; padding: 12px; border-radius: 4px; font-size: 12px; border-left: 3px solid #9C27B0;">
<span style="color: #1565c0;">arguments:</span>  <span style="color: #666;"># â† PartagÃ©s (niveau tÃ¢che)</span>
  - <span style="color: #c62828;">code:</span> "base"
    <span style="color: #c62828;">name:</span> "Base de donnÃ©es"
    <span style="color: #c62828;">type:</span> "directory"
    <span style="color: #c62828;">required:</span> 1
    <span style="color: #1565c0;">values:</span>
      - <span style="color: #c62828;">command:</span> "export_cmd"
        <span style="color: #c62828;">argument:</span> "DATABASE"

<span style="color: #c62828;">commands:</span>
  - <span style="color: #c62828;">name:</span> "export_cmd"
    <span style="color: #c62828;">command:</span> "export.exe {DATABASE} {FORMAT}"
    <span style="color: #c62828;">arguments:</span>  <span style="color: #666;"># â† Locaux (spÃ©cifiques Ã  cette commande)</span>
      - <span style="color: #c62828;">code:</span> "FORMAT"
        <span style="color: #c62828;">name:</span> "Format de sortie"
        <span style="color: #c62828;">type:</span> "string"
        <span style="color: #c62828;">required:</span> 0
        <span style="color: #1565c0;">default:</span> "CSV"
</pre>
<p style="color: #666; margin: 5px 0;">
âœ… <code>DATABASE</code> = partagÃ© (saisi une fois, utilisÃ© partout)<br>
âœ… <code>FORMAT</code> = local (spÃ©cifique Ã  la commande export_cmd)
</p>

<div style="background-color: #ffebee; padding: 12px; border-radius: 6px; margin: 15px 0; border-left: 4px solid #f44336;">
    <b>âš ï¸ RÃ¨gles importantes :</b>
    <ul style="margin: 5px 0; padding-left: 20px;">
        <li>Section <code>arguments</code> (pas <code>shared_arguments</code>)</li>
        <li>Chaque argument doit avoir une liste <code>values</code></li>
        <li>Dans <code>values</code> : <code>command</code> = nom de la commande, <code>argument</code> = code de l'argument cible</li>
        <li>Les valeurs <code>default</code> de la tÃ¢che <b>remplacent</b> celles des commandes</li>
        <li>Un argument partagÃ© peut Ãªtre injectÃ© dans <b>plusieurs commandes</b></li>
    </ul>
</div>
